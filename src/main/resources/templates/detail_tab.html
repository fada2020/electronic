<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>OPS:詳細設定</title>
    <meta name="description" content="OPS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="stylesheet" href="../static/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/assets/css/style.css">
	<!-- datetimepicker -->
	<link rel="stylesheet" href="../static/assets/css/datetimepicker/jquery.datetimepicker.css">
	<!-- dataTable -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.22/datatables.min.css"/>
    <link href='../static/vendors/Select-1.3.1/css/select.dataTables.css' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
<style>
th{
	text-align: center;
}
td{
	text-align: left;
}
.highlight { background-color: #b0c4de; }
.nonhighlighted { background: white; }
</style>
</head>

<body>
    <!-- Left Panel -->
	<div th:insert="fragments/sidebar :: sidebar" th:remove="tag"></div>
    <!-- Left Panel -->
    <div id="right-panel" class="right-panel">

        <!-- Header-->
		<div th:insert="fragments/top_nav :: top_nav" th:remove="tag"></div>
        <!-- Header-->

        <div class="breadcrumbs">
            <div class="col-sm-12">
                <div class="col-sm-2">
	                <div class="page-header float-left">
	                    <div class="page-title">
	                        <h1>詳細設定</h1>
	                    </div>
	                </div>
                </div>
                <div class="col-sm-6" style="margin-top: 10px; float: left;">
					<span style="color:red; font-size:1.6em; text-align: left;" th:disabled="${errMsg != null}" th:text="${errMsg}"></span>
                </div>
                <div class="col-sm-4">
	                <div class="float-left" id="view-only" style="float: right; text-align: right; padding-top: 14px;">
						<span style="padding-right:80px;"></span>
						<input type="checkbox" checked data-toggle="modal" data-target="#checkModal">
						<span style="font-size:1.4em;"> 有効（未入力項目がある場合、チェック不可）</span>
					</div>
	                <div class="float-right" id="view-only" style="float: right; text-align: right; margin-top: 10px; display:none;">
                        <button type="button" id="editViewBtn" class="btn btn-warning btn-sm"><i class="fa fa-tag"></i>&nbsp; 参照中</button>
                        <span style="padding-right:10px;"></span>
                        <button type="button" class="btn btn-secondary btn-sm" data-toggle="modal"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#cancelModal"><i class="fa fa-repeat"></i>&nbsp; キャンセル</button>
		        	</div>
	                <div class="float-right" id="view-edit" style="float: right; text-align: right; margin-top: 10px; display:none;">
                        <button type="button" id="modeEditBtn" class="btn btn-primary btn-sm" style="display: none;"><i class="fa fa-edit"></i>&nbsp; 編集中</button>
                        <button type="button" id="modeViewBtn" class="btn btn-warning btn-sm"><i class="fa fa-tag"></i>&nbsp; 参照中</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" id="saveOkBtn" class="btn btn-success btn-sm" data-toggle="modal" data-target="#saveModal" style="display:none;"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <button type="button" id="saveNgBtn" class="btn btn-secondary btn-sm"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#cancelModal"><i class="fa fa-repeat"></i>&nbsp; キャンセル</button>
		        	</div>
                </div>
	        </div>
        </div>

<form th:action="@{/detail/insert}" name="mainFrom" id="mainFrom" method="post">
<input type="hidden" id="statusFlg" name="statusFlg" value="0">
<input type="hidden" id="viewFlag" name="viewFlag" th:value="${viewFlag}">
<input type="hidden" id="upUserId" name="upUserId" th:value="${session.id}">
<input type="hidden" id="upUserName" name="upUserName" th:value="${session.name}">

        <div class="content mt-3">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#layer-1" role="tab" aria-controls="item1" aria-selected="true"><span style="font-size: 14px;">基本情報</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#layer-2" role="tab" aria-controls="item2" aria-selected="false"><span style="font-size: 14px;">開始判定条件・連絡</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#layer-3" role="tab" aria-controls="item3" aria-selected="false"><span style="font-size: 14px;">終了判定条件・連絡</span></a>
                </li>
            </ul>
            <div class="tab-content pl-3 p-1" id="myTabContent" style="padding-top: 20px !important;">

            	<!-- 基本情報TAB -->
                <div class="tab-pane fade show active" id="layer-1" role="tabpanel" aria-labelledby="home-tab">
                    <div class="col-6">
                        <!-- 基本情報 -->
                        <h5>サイト選択</h5>
                        <div class="card card-body">
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">
									<button type="button" id="siteNgBtn" class="btn btn-secondary btn-sm"><i class="fa fa-sitemap"></i>&nbsp; サイト選択</button>
									<button type="button" id="siteOkBtn" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#siteSearchModal" style="display:none;"><i class="fa fa-sitemap"></i>&nbsp; サイト選択</button>
                                </div>
                                <div class="col-8">
                                    <input type="text" id="sitename" name="sitename" class="form-control input-sm" th:value="${detailTab.sitename}">
                                    <input type="hidden" id="sitecd" name="sitecd" class="form-control input-sm" th:value="${detailTab.sitecd}">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【住所】${Address}</div>
                                <div class="col-8">
                                    <input type="text" id="address" name="address" class="form-control input-sm" th:value="${detailTab.address}">
                                </div>
                            </div>
                        </div>
                        <!-- 指定電力超過のお知らせメール 記載情報 -->
                        <h5>指定電力超過のお知らせメール 記載情報</h5>
                        <div class="card card-body">
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【お客様番号】</div>
                                <div class="col-8">
                                    <input type="text" id="customerno" name="customerno" class="form-control input-sm"  th:value="${detailTab.customerno}">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【施設名】${Customer}</div>
                                <div class="col-8">
                                    <input type="text" id="customer" name="customer" class="form-control input-sm" th:value="${detailTab.customer}">
                                </div>
                            </div>
                        </div>
                        <!-- メール送付先 -->
                        <h5>メール送付先</h5>
                        <div class="card card-body">
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">社外アドレス<br>連絡メールのみ</div>
                                <div class="col-9"><textarea name="outermailaddr" id="outermailaddr" rows="2" placeholder="" class="form-control" th:text="${detailTab.outermailaddr}"></textarea></div>
                            </div>
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">社内ユーザー<br><br>
                                    <button type="button" id="userMOkBtn" class="btn btn-primary btn-sm btn_m_user" data-toggle="modal" data-target="#userSelectModal" style="display:none;"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                    <button type="button" id="userMNgBtn" class="btn btn-secondary btn-sm btn_m_user"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                </div>
                                <div class="col-9">
                                	<textarea name="intermailaddr" id="intermailaddr" rows="2" placeholder="" class="form-control" th:text="${detailTab.intermailaddr}"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <h5>責任者</h5>
                        <div class="card card-body">
                            <!-- 責任者 -->
                           <div class="row form-group form-group-sm">
                         	<div style="width:100%;">
                               <div class="col-3">
                               <div class="col-3" style="padding-top: 20px;">
                                    <button type="button" id="userSOkBtn" class="btn btn-primary btn-sm btn_s_user" data-toggle="modal" data-target="#adminSearchModal" style="display:none;"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                    <button type="button" id="userSNgBtn" class="btn btn-secondary btn-sm btn_s_user"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                               </div>
                               </div>
                               <div class="col-9">
                                   <div class="col-6">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">名称</label>
                                       <input type="hidden" class="form-control input-sm" id="adminuserid" name="adminuserid" style="" th:value="${detailTab.adminuserid}">
                                       <input type="text" class="form-control input-sm" id="adminusername" name="adminusername" style="" th:value="${detailTab.adminusername}">
                                   </div>
                                   <div class="col-6">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">電話番号</label>
                                       <input type="text" class="form-control input-sm" id="adminphoneno" name="adminphoneno" style="" th:value="${detailTab.adminphoneno}">
                                   </div>
                               </div>
                               </div>
                            	<div style="width:100%;">
                            	<div class="col-3">
                            	</div>
                                <div class="col-9" style="padding: 20px 30px 30px;">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">メールアドレス</label>
                                       <input type="text" class="form-control input-sm" id="adminmailaddress" name="adminmailaddress" style="" th:value="${detailTab.adminmailaddress}">
                                   </div>
                               </div>
                           </div><!-- row form-group form-group-sm-->
                       </div><!-- card card-body-->
                    </div>
                    <div class="col-6">
                        <!-- <h5>最終更新日時・更新者</h5> -->
                        <div class="card card-body">
                            <div class="row form-group form-group-sm">
                                <div class="col-9">
                                    <div class="col-6">
                                            <label for="" class="control-label mb-1" style="font-size: 15px;">最終更新日時</label>
                                            <input type="text" id="upoatime" name="upoatime" class="form-control input-sm" th:value="${detailTab.upoatime}" disabled>
                                    </div>
                                    <div class="col-6">
                                            <label for="" class="control-label mb-1" style="font-size: 15px;">最終更新者</label>
                                            <input type="text" id="upoaid" name="upoaid" class="form-control input-sm" th:value="${detailTab.upoaid}" disabled>
                                            <input type="hidden" id="upoaname" name="upoaname" class="form-control input-sm" th:value="${detailTab.upoaname}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 開始判定条件・連絡TAB -->
                <div class="tab-pane fade" id="layer-2" role="layer-2" aria-labelledby="profile-tab">
                    <div class="col-6">
                        <h5>開始連絡</h5>
                        <div class="card card-body">
                            <!-- 開始連絡　-->
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">
                                    連絡先
                                </div>
                                <div class="col-9">
								    <select id="startcontactcd" name="startcontactcd" class="form-control" style="width: 100%; ">
								        <option value="-1"></option>
								        <option th:each="scont : ${contList}" th:value="${scont.contactcd}" th:selected="${scont.contactcd} == ${detailTab.startcontactcd}" th:inline="text">[[${scont.contactname}]]</option>
								    </select>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">
                                    電話番号　音声ファイル
                                </div>
                                <div class="col-9">
                                    <input type="text" id="startvoicepath" name="startvoicepath" class="form-control input-sm" style="width: 300px;" th:value="${detailTab.startvoicepath}">
                                    <button type="button" class="btn btn-success btn-sm" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-upload"></i>&nbsp; 登録</button>
                                    <button type="button" class="btn btn-danger btn-sm" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-play"></i>&nbsp; 再生</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">
                                    電話番号　リトライ回数
                                </div>
                                <div class="col-9">
                                    <input type="text" id="startvoicecycl" name="startvoicecycl" class="form-control input-sm" style="width: 100px;" th:value="${detailTab.startvoicecycl}">
                                    <span style="margin-left: 10px; margin-right: 10px; font-size: 14px;">分間隔</span>
                                    <input type="text" id="startvoicecnt" name="startvoicecnt" class="form-control input-sm" style="width: 100px;" th:value="${detailTab.startvoicecnt}">
                                    <span style="margin-left: 10px; font-size: 14px;">回</span>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3"style="font-size: 15px;">
                                    メール タイトル
                                </div>
                                <div class="col-9">
                                    <input type="text" id="startsubject" name="startsubject" class="form-control input-sm" style="width: 100%;" th:value="${detailTab.startsubject}">
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline" style="vertical-align:top;">
                                <div class="col-3" style="height: 400px; vertical-align:top; font-size: 15px;">メール 本文</div>
                                <div class="col-9">
                                    <textarea name="startmailtext" id="startmailtext" rows="5" style="width: 100%; height: 400px;" placeholder="" class="form-control" th:text=${detailTab.startmailtext}></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <h5>開始判定条件</h5>
                        <div class="card card-body">
                            <!-- 開始判定条件 -->
                            <div class="row form-group form-group-sm">
                                <div class="col-6">
                                    <textarea style="overflow:auto;" name="startCalTextarea" id="startCalTextarea" rows="2" placeholder="" class="form-control"></textarea>
                                </div>
                                <div class="col-6">
                                    <button type="button" class="btn btn-primary btn-sm btn_start_cal" style="margin-bottom: 10px; width: 150px;"
                                    data-toggle="modal" data-target="#calModal" onclick="setTabId('1')"><i class="fa fa-list-ul"></i>&nbsp; 演算式設定</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm">
                                <div class="col-12">
                                    <label for="" class="control-label mb-1">接点タグ</label>
                                    <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th class="centerText" style="width:10%;" scope="col">No</th>
                                                <th class="centerText" style="width:20%;" scope="col">監視端末</th>
                                                <th class="centerText" style="width:20%;" scope="col">タグ名称</th>
                                                <th class="centerText" style="width:10%; " scope="col">ON/OFF</th>
                                                <th style="width:30%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th scope="row">A</th>
                                                <td>大手町タワー#1</td>
                                                <td>1号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">B</th>
                                                <td>大手町タワー#2</td>
                                                <td>1号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">C</th>
                                                <td>大手町タワー#3</td>
                                                <td>1号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">D</th>
                                                <td>大手町タワー#1</td>
                                                <td>2号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">E</th>
                                                <td>大手町タワー#2</td>
                                                <td>2号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">F</th>
                                                <td>大手町タワー#3</td>
                                                <td>2号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">G</th>
                                                <td>大手町タワー#1</td>
                                                <td>3号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">H</th>
                                                <td>大手町タワー#2</td>
                                                <td>3号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">I</th>
                                                <td>大手町タワー#3</td>
                                                <td>3号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">J</th>
                                                <td>大手町タワー#1</td>
                                                <td>4号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 終了判定条件・連絡TAB -->
                <div class="tab-pane fade" id="layer-3" role="layer-3" aria-labelledby="contact-tab">
                    <div class="col-6">
                        <h5>終了連絡</h5>
                        <div class="card card-body">
                            <!-- 終了連絡　-->
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">
                                    連絡先
                                </div>
                                <div class="col-9">
								    <select id="endcontactcd" name="endcontactcd" class="form-control" style="width: 100%; ">
								        <option value="-1"></option>
								        <option th:each="econt : ${contList}" th:value="${econt.contactcd}" th:selected="${econt.contactcd} == ${detailTab.endcontactcd}" th:inline="text">[[${econt.contactname}]]</option>
								    </select>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">
                                    電話番号　音声ファイル
                                </div>
                                <div class="col-9">
                                    <input type="text" id="endvoicepath" name="endvoicepath" class="form-control input-sm" style="width: 300px;" th:value="${detailTab.endvoicepath}">
                                    <button type="button" class="btn btn-success btn-sm" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-upload"></i>&nbsp; 登録</button>
                                    <button type="button" class="btn btn-danger btn-sm" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-play"></i>&nbsp; 再生</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">
                                    電話番号　リトライ回数
                                </div>
                                <div class="col-9">
                                    <input type="text" id="endvoicecycl" name="endvoicecycl" class="form-control input-sm" style="width: 100px;" th:value="${detailTab.endvoicecycl}">
                                    <span style="margin-left: 10px; margin-right: 10px; font-size: 14px;">分間隔</span>
                                    <input type="text" id="endvoicecnt" name="endvoicecnt" class="form-control input-sm" style="width: 100px;" th:value="${detailTab.endvoicecnt}">
                                    <span style="margin-left: 10px; font-size: 14px;">回</span>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">
                                    メール タイトル
                                </div>
                                <div class="col-9">
                                    <input type="text" id="endsubject" name="endsubject" class="form-control input-sm" style="width: 100%;" th:value="${detailTab.endsubject}">
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline" style="vertical-align:top;">
                                <div class="col-3" style="height: 400px; vertical-align:top; font-size: 15px;">メール 本文</div>
                                <div class="col-9">
                                    <textarea name="endmailtext" id="endmailtext" rows="5" style="width: 100%; height: 400px;" placeholder="" class="form-control" th:text=${detailTab.endmailtext}></textarea>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-6">
                        <h5>終了判定条件</h5>
                        <div class="card card-body">
                            <!-- 終了判定条件 -->
                            <div class="row form-group form-group-sm">
                                <div class="col-5">
                                    <textarea style="overflow:auto;" name="endCalTextarea" id="endCalTextarea" rows="2" placeholder="" class="form-control"></textarea>
                                </div>
                                <div class="col-2" style="text-align: center; vertical-align: text-bottom; font-size: medium;">
                                    <span>AND</span>
                                </div>
                                <div class="col-2">
                                    <textarea style="background-color:white;" name="ikitiZ_input" id="ikitiZ_input" rows="2" class="form-control" disabled=true></textarea>
                                </div>
                                <div class="col-3">
                                        <button type="button" class="btn btn-primary btn-sm btn_end_cal" style="margin-bottom: 10px; width: 150px;"
                                        data-toggle="modal" data-target="#calModal" onclick="setTabId('2')"><i class="fa fa-list-ul"></i>&nbsp; 演算式設定</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm">

                                <div class="col-12">
                                    <label for="" class="control-label mb-1">接点タグ</label>
                                    <table class="table table-bordered table-sm" id="tagTable">
                                        <thead>
                                            <tr>
                                             <th style="width:10%;" scope="col">No</th>
                                                <th style="width:20%;" scope="col">監視端末</th>
                                                <th style="width:20%;" scope="col">タグ名称</th>
                                                <th style="width:10%;" scope="col">ON/OFF</th>
                                                <th style="width:30%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr>
                                                <th  scope="row">A</th>
                                                <td>大手町タワー#1</td>
                                                <td>1号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">B</th>
                                                <td>大手町タワー#2</td>
                                                <td>1号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                   <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">C</th>
                                                <td>大手町タワー#3</td>
                                                <td>1号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">D</th>
                                                <td>大手町タワー#1</td>
                                                <td>2号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">E</th>
                                                <td>大手町タワー#2</td>
                                                <td>2号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">F</th>
                                                <td>大手町タワー#3</td>
                                                <td>2号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">G</th>
                                                <td>大手町タワー#1</td>
                                                <td>3号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">H</th>
                                                <td>大手町タワー#2</td>
                                                <td>3号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">I</th>
                                                <td>大手町タワー#3</td>
                                                <td>3号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">J</th>
                                                <td>大手町タワー#1</td>
                                                <td>4号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- アナログタグ -->
                                    <label for="" class="control-label mb-1">アナログタグ</label>
                                    <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th style="width:5%;" scope="col">No</th>
                                                <th style="width:20%;" scope="col">監視端末</th>
                                                <th style="width:20%;" scope="col">タグ名称</th>
                                                <th style="width:10%;"></th>
                                                <th style="width:10%;" scope="col">閾値</th>
                                                <th style="width:35%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td scope="row" style="text-align: center; vertical-align: middle;">Z</td>
                                                <td style="text-align: center; vertical-align: middle;">大手町タワー#2</td>
                                                <td style="text-align: center; vertical-align: middle;">受電電力</td>
                                                <td style="text-align: center; vertical-align: middle;">
                                                	<select id="ikitiZSlt" name="ikitiZSlt">
                                                		<option value="＞">＞</option>
                                                		<option value="≧">≧</option>
                                                		<option value="≦">≦</option>
                                                		<option value="＜">＜</option>
                                                	</select>
                                                </td>
                                                <td style="text-align: center; vertical-align: middle;"><input type=text id="ikitiZ" placeholder=4.000></td>
                                                <td style="text-align: center; vertical-align: middle;">
                                                    <button type="button" class="btn btn-primary btn-sm btn_analog_add" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm btn_analog_del" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table><!-- .アナログタグ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
</form>
<!-- Site Search Modal Start-->
<div class="modal fade" id="siteSearchModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id='siteForm'>
<input type="hidden" id="hidSiteName">
<input type="hidden" id="hidSiteCd">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">サイト設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="keyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 120px; font-size: 14px;">No</th>
                                        <th style="text-align:center; width: 500px; font-size: 14px;">サイト名称</th>
                                        <th style="text-align:center; display: none;"></th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="siteList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                        	    <thead style="display:none;">
                                    <tr>
                                        <td></td><td></td><td></td>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="rows, rowStat : ${siteList}">
        <td scope="row" style="width: 112px !important; text-align:center;padding-left: 10px;" th:text="${rowStat.count}"></td>
		<td style="width: 500px !important; font-size: 12px;" th:text="${rows.sitename}"></td>
		<td style="display: none;" th:text="${rows.sitecd}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_site_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- Site Search Modal End-->
<!-- 責任者ユーザー選択Modal Start-->
<div class="modal fade" id="adminSearchModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id='adminForm'>
<input type="hidden" id="hidAdminId">
<input type="hidden" id="hidAdminName">
<input type="hidden" id="hidAdminAddress">
<input type="hidden" id="hidAdminTelno">

    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">ユーザー選択</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="adminKeyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_admin_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="width: 100%; background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 20%; font-size: 14px;">氏名</th>
                                        <th style="text-align:center; width: 60%; font-size: 14px;">メールアドレス</th>
                                        <th style="text-align:center; width: 20%; font-size: 14px;">電話番号</th>
										<th style="text-align:center; display: none;"></th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="adminList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                        	    <thead style="display:none;">
                                    <tr>
                                        <td></td><td></td><td></td><td></td>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="admin : ${userList}" style="width: 100%;">
    <td style="width: 20%; font-size: 12px; text-align:center;" th:text="${admin.username}"></td>
    <td style="width: 60%; font-size: 12px;" th:text="${admin.mailaddr}"></td>
    <td style="width: 20%; font-size: 12px;" th:text="${admin.mobiletel}"></td>
	<td style="display: none;" th:text="${admin.loginuser}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_admin_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- 責任者ユーザー選択Modal Start-->
<!-- User Select Modal Start-->
<div class="modal fade" id="userSelectModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id="userForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">ユーザー選択</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="userKeyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_user_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="width: 100%; background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 14px;"></th>
                                        <th style="text-align:center; width: 40%; font-size: 14px;">氏名</th>
                                        <th style="text-align:center; width: 50%; font-size: 14px;">メールアドレス</th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="userList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                                <thead style="display:none;">
                                    <tr>
                                        <td></td><td></td><td></td>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="user : ${userList}" style="width: 100%;">
	<td scope="row" style="width: 10%; text-align:center;">
	    <input type="checkbox" id="userCheck" name="userCheck" value="option1">
	</td>
    <td style="width: 40%; font-size: 12px;"th:text="${user.username}"></td>
    <td style="width: 50%; font-size: 12px;"th:text="${user.mailaddr}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_user_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- User Select Modal End-->
<!-- Cal Modal Start-->
<div class="modal fade" id="calModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">演算式設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="margin-bottom: 0px;">
                <div class="col-sm-12 col-lg-12" style="margin-bottom: 0px;">
                    <div class="card" style="margin-bottom: 0px;">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">演算式</label>
                                <textarea style="background-color:lightyellow;" name="calTextarea" id="calTextarea"
                                 rows="2" cols="100%" placeholder="" class="form-control" disabled></textarea>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                            <table id="calTabTable" class="table table-bordered table-sm">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 14px;">No</th>
                                        <th colspan="4" style="text-align:center;width: 90%; font-size: 14px;">演算子 (　　　　　　　　　)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="height: 40px;">
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">1</td>
                                        <td style="width: 15%; font-size: 12px; text-align: center;"></td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">A</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">2</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow2" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">B</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">3</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow3" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">C</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">4</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow4" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">D</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">5</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow5" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">E</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">6</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow6" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">F</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">7</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow7" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">G</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">8</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow8" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">H</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">9</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow9" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">I</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">10</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow10" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">J</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                </tbody>
                             </table>
                             <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                <tbody>
                                	<tr>
	                                	<td style="text-align: center;">
											<button type="button" class="btn btn-dark btn_left_add" style="width: 120px; text-align: center;"> ( </button>
											<button type="button" class="btn btn-dark btn_right_add" style="width: 120px; text-align: center;"> ) </button>
											<button type="button" class="btn btn-dark btn_left_del" style="width: 120px; text-align: center;"> ( DEL </button>
											<button type="button" class="btn btn-dark btn_right_del" style="width: 120px; text-align: center;"> ) DEL </button>
											<button type="button" class="btn btn-danger btn_clear" style="width: 120px; text-align: center;"> クリア </button>
	                                	</td>
                                	</tr>
                                </tbody>
                            </table>
                            <div class="form-group form-inline" style="margin-top: 10px; margin-bottom: 0px;">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">コメント</label>
                                <textarea name="calComment" id="calComment" rows="2" cols="100%" placeholder="" class="form-control"></textarea>
                            </div><!--/.form-group -->
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_set_cal" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="clearClatext()">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Cal Modal End-->
<!-- 連絡先マスタ Modal Start -->
<div class="modal fade" id="masterModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">連絡先マスタ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline" style="float: right; padding-top: 20px;">
                                <button type="button" class="btn btn-info" style="margin-right: 20px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-plus-square"></i> 新規</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-export" class="table table-striped table-bordered table-sm">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 12px;">NO</th>
                                        <th style="text-align:center;width: 20%; font-size: 12px;">名称</th>
                                        <th style="text-align:center;width: 25%; font-size: 12px;">メールアドレス</th>
                                        <th style="text-align:center;width: 20%; font-size: 12px;">電話番号</th>
                                        <th style="text-align:center;width: 25%; font-size: 12px;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row" style="text-align:center;">1</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">2</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">3</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">4</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">5</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- 連絡先マスタ Modal End -->
<!-- Master Add Modal Part Start-->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">名称</label>
                    <input type="text" placeholder="" style="width: 290px" class="form-control input-sm">
                </div><!--/.form-group -->
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">電話番号</label>
                    <input type="text" placeholder="" style="width: 290px;" class="form-control input-sm">
                </div><!--/.form-group -->
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">メールアドレス</label>
                    <input type="text" placeholder="" style="width: 290px;" class="form-control input-sm">
                </div><!--/.form-group -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary">保存</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Master Add Modal Part End-->
<!-- Tag Modal Start-->
<div class="modal fade" id="tagModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id="tagForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">タグ一覧</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <input type="text" placeholder="大手町プレイスウエストタワー" class="form-control input-sm">
                            </div><!--/.form-group -->
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">顧客</label>
                                <select name="select" id="select" class="form-control">
                                    <option value="0">大手町PWタワー#1</option>
                                    <option value="1">大手町PWタワー#2</option>
                                </select>
                                <input type="text" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary"><i class="fa fa-search"></i>検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 120px; font-size: 14px;">タグNo</th>
                                        <th style="text-align:center; width: 300px; font-size: 14px;">タグ名称</th>
                                        <th style="text-align:center; width: 200px; font-size: 14px;">単位</th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="tagList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                                <thead style="display:none;">
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody>
<th:block th:each="seq : ${#numbers.sequence(1,50)}">
                                    <tr>
                                        <td scope="row" style="width: 121px; text-align:center;padding-left: 10px;" th:text="|Di${seq}|"></td>
                                        <td style="width: 330px; font-size: 12px;"th:text="|${seq}号機開始動中|"></td>
                                        <td style="width: 200px; font-size: 12px;"></td>
                                    </tr>
</th:block>
                                </tbody>
                            </table>

                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- Tag Modal End-->
<!-- Modal Part Start-->
<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>データを保存します。</p>
                <div class="row form-group">
                    <div class="col-4" style="margin-top: 10px;"><span style="font-size: 12px;">アカウント</span></div>
                    <div class="col-8">
                        <input type="text" id="checkId" name="checkId" placeholder="" class="form-control input-sm">
                    </div>
                </div>
            </div>
            <div class="alert alert-danger alert-dismissable text-left" id="idErr" hidden="true">アカウントが一致しません。</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_save">保存</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Part End-->
<!-- Tag Delete Modal Part Start-->
<div class="modal fade" id="tagDeleteModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    選択されたタグを削除します。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">削除</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Tag Delete Modal Part End-->
<!-- Cancel Modal Part Start-->
<div class="modal fade" id="cancelModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    データを保存せずに終了しました。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">終了</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Cancel Modal Part End-->

<!-- Check Modal Part Start-->
<div class="modal fade" id="checkModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    未入力項目があるため保存できません。<br>一時保存する場合は、有効チェックを外してください。
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">確認</button>
            </div>
        </div>
    </div>
</div>
<!-- Check Modal Part End-->

<!-- Delete1 Modal Part Start-->
<div class="modal fade" id="subDeleteModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    選択されたデータを削除します。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">削除</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Cancel Modal Part End-->

        </div> <!-- .content -->

<form id="hidTabForm">
<input type="hidden" id="tabId" name="tabId">
</form>
    </div><!-- /#right-panel -->

    <script src="../static/vendors/jquery/dist/jquery.js"></script>
    <script src="../static/vendors/popper.js/dist/umd/popper.min.js"></script>
    <script src="../static/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../static/assets/js/main.js"></script>
	<!-- datetimepicker -->
    <script src="../static/assets/js/datetimepicker/jquery.js"></script>
    <script src="../static/assets/js/datetimepicker/jquery.datetimepicker.full.js"></script>
	<!-- dataTable -->
	<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.22/datatables.min.js"></script>
	<script type="text/javascript" src="../static/vendors/Select-1.3.1/js/dataTables.select.js"></script>

<script th:inline="javascript">
/*<![CDATA[*/
var enable = /*[[${session.enable}]]*/ 'default';
var login_id = /*[[${session.id}]]*/ 'default';
/*]]>*/

const viewEditNg = document.getElementById("editNgDiv");
const viewEditOk = document.getElementById("editOkDiv");

jQuery(document).ready(function($) {

	var selectedIdx = 0;
	//画面表示初期化
	viewSet(enable);

	//UserList DataTable Option設定
    var tableUser = $('#userList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        }
 	});

	//SiteList DataTable Option設定
    var tableSite = $('#siteList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

	//責任者ユーザー選択のDataTable Option設定
    var tableAdmin = $('#adminList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

	//DataTable Option設定
    var table = $('#tagList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

    $(".dataTables_scrollBody").width($(".dataTables_scrollHead").width());
    $('#button').click( function () {
        table.row('.selected').remove().draw( false );
    } );

    //モーダル終了時、選択行をクリア
    $('.btn_ok').on('click', function (e) {
        table.$('tr.selected').removeClass('selected');
    });

    //サイト選択後、設定ボタンをクリックすると親ウィンドウに値をセット
    $('#siteList tr').on('click', function (e) {
        var str = ""
        var tdArr = new Array();
        var tr = $(this);
        var td = tr.children();
        var siteName = td.eq(1).text();
        var siteCd = td.eq(2).text();
        $('#hidSiteName').val(siteName);
        $('#hidSiteCd').val(siteCd);
    });
    $('.btn_site_ok').on('click', function (e) {
    	var selectedSiteName = $('#hidSiteName').val();
    	var selectedSiteCd = $('#hidSiteCd').val();
    	if(selectedSiteName != 'サイト名称'){
        	$('#sitename').val(selectedSiteName);
        	$('#sitecd').val(selectedSiteCd);
    	}
    	tableSite.$('tr.selected').removeClass('selected');
    	$('#siteSearchModal').find('form')[0].reset()

    });

	//責任者のユーザー選択、設定ボタンをクリックすると親ウィンドウに値をセット
    $('#adminList tr').on('click', function (e) {
        var str = ""
        var tdArr = new Array();
        var tr = $(this);
        var td = tr.children();

        var adminName = td.eq(0).text();
        var adminAddress = td.eq(1).text();
        var adminTelno = td.eq(2).text();
        var adminId = td.eq(3).text();

        $('#hidAdminId').val(adminId);
        $('#hidAdminName').val(adminName);
        $('#hidAdminTelno').val(adminTelno);
        $('#hidAdminAddress').val(adminAddress);
    });
    $('.btn_admin_ok').on('click', function (e) {
    	var selectedAdminId = $('#hidAdminId').val();
    	var selectedAdminName = $('#hidAdminName').val();
    	var selectedAdminAddress = $('#hidAdminAddress').val();
    	var selectedAdminTelno = $('#hidAdminTelno').val();
    	if(selectedAdminName != '氏名'){
        	$('#adminuserid').val(selectedAdminId);
        	$('#adminusername').val(selectedAdminName);
        	$('#adminphoneno').val(selectedAdminTelno);
        	$('#adminmailaddress').val(selectedAdminAddress);
    	}
    	tableSite.$('tr.selected').removeClass('selected');
    	$('#adminSearchModal').find('form')[0].reset()
    });

    //ユーザー選択後、設定ボタンをクリックすると親ウィンドウに値をセット
	$(".btn_user_ok").click(function(){
		var rowData = new Array();
		var tdArr = new Array();
		var checkbox = $("input[name=userCheck]:checked");
		var name = '';
		var email = '';
		let emailArr = '';
		checkbox.each(function(i){
			var tr = checkbox.parent().parent().eq(i);
			var td = tr.children();
			name = td.eq(1).text();
			email = td.eq(2).text();
			if(emailArr == ''){
				emailArr = email;
			}else{
				emailArr += ';'+email;
			}
		});
		$('#intermailaddr').val(emailArr);
    	tableUser.$('tr.selected').removeClass('selected');
    	$('#userSelectModal').find('form')[0].reset()
	});

    //演算式設定関連関数===================================
    //アナログタグ中、演算子更新
	$("#ikitiZSlt").on('change', function (e) {
		var ikiti = $('#ikitiZ').val();
		if(ikiti != ''){
			$('#ikitiZ_input').val('');
			var r = $('[name=ikitiZSlt] option:selected').text();
		    $('#ikitiZ_input').val('Z '+ r + ' '+ ikiti);
		}
	});
    //アナログタグ中、閾値更新
	$('#ikitiZ').keyup(function() {
		var ikiti = $('#ikitiZ').val();
		if(ikiti != ''){
			$('#ikitiZ_input').val('');
			var r = $('[name=ikitiZSlt] option:selected').text();
		    $('#ikitiZ_input').val('Z '+ r + ' '+ ikiti);
		}
    });

    $('#calTabTable tr').on('click', function (e) {
        var selected = $(this).hasClass("highlight");
        rowno = $(this).closest('tr').index();
        selectedIdx = rowno+1;
        $("#calTabTable tr").removeClass("highlight");
        if(!selected){
            $(this).addClass("highlight");
        }
    });

    $(".btn_left_add").click(function(){
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text('(');
        changeClatext();
    });
    $(".btn_right_add").click(function(){
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text(')');
        changeClatext();
    });
    $(".btn_left_del").click(function(){
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text('');
        changeClatext();
    });
    $(".btn_right_del").click(function(){
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text('');
        changeClatext();
    });
    $(".btn_clear").click(function(){
    	clearClatext();
    });
    $(".btn_set_cal").click(function(){
    	var tabID = $('#tabId').val();
    	var getText = $('#calTextarea').val();
    	if(tabID === '1'){
        	$('#startCalTextarea').val('');
        	$('#startCalTextarea').val(getText);
    	}else{
        	$('#endCalTextarea').val('');
        	$('#endCalTextarea').val(getText);
    	}
    	clearClatext();
    });
	//演算式設定関連関数===================================

});

jQuery(function($){
	$('#calModal').on('show.bs.modal', function (event) {
		var modal = $(this);
		var itemIDs = [];
		$('#tagTable tr').map(function () {
		itemIDs.push($(this).children('th:first').text());
		});

		for (i = 1; i < itemIDs.length; i++) {
			modal.find('.card-body select#tagNo' + i +' option').remove();
			for (j = 1; j < itemIDs.length; j++) {
				var option = document.createElement('option');
				option.setAttribute('value', itemIDs[j]);
				if(i == j){
					option.setAttribute('selected', true);
				}
				option.innerHTML = itemIDs[j];
				modal.find('.card-body select#tagNo'+ i).append(option);
			}
		}

	});

    $('#modeEditBtn').on('click', function() {

        $('#modeEditBtn').hide();
        $('#modeViewBtn').show();
        $('#saveOkBtn').hide();
        $('#siteOkBtn').hide();
        $('#userMOkBtn').hide();
        $('#userSOkBtn').hide();

        $('#saveNgBtn').show();
        $('#siteNgBtn').show();
        $('#userMNgBtn').show();
        $('#userSNgBtn').show();

        $('#statusFlg').val('0');
		viewChange('0');
    });
    $('#modeViewBtn').on('click', function() {

        $('#modeViewBtn').hide();
        $('#modeEditBtn').show();
        $('#saveNgBtn').hide();
        $('#siteNgBtn').hide();
        $('#userMNgBtn').hide();
        $('#userSNgBtn').hide();

        $('#saveOkBtn').show();
        $('#siteOkBtn').show();
        $('#userMOkBtn').show();
        $('#userSOkBtn').show();

        $('#statusFlg').val('1');
		viewChange('1');
    });

    //サイト選択区分
    $('.btn_search').on('click', function() {
    	var keyword = $('#keyword').val();
    	if(keyword == ''){
            $("#siteList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#siteList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var id = $row.find('td:eq(1)').text();
                    if (id.indexOf(keyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}

    });
    //責任者ユーザー選択区分
    $('.btn_admin_search').on('click', function() {
    	var adminKeyword = $('#adminKeyword').val();
    	if(adminKeyword == ''){
            $("#adminList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#adminList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var admin = $row.find('td:eq(0)').text();
                    if (admin.indexOf(adminKeyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}
    });

    //ユーザー選択区分
    $('.btn_user_search').on('click', function() {
    	var userKeyword = $('#userKeyword').val();
    	if(userKeyword == ''){
            $("#userList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#userList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var user = $row.find('td:eq(1)').text();
                    if (user.indexOf(userKeyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}
    });


    //詳細設定保存処理
    $('.btn_save').on('click', function() {
		var inUserId = $('#checkId').val();
		if(inUserId != login_id){
			//チェックエラー
			$("#idErr")[0].hidden = false;
		}else{
			//保存処理を行う
			$("#idErr")[0].hidden = true;
			if($("#viewFlag").val() == 'add'){
				$("#mainFrom").action = "/detail/insert/";
			}else{
				$("#mainFrom").action = "/detail/update/";
			}
			$("#mainFrom").submit();
		}
    });
    //キャンセル処理を行う。
    $('.btn_cancle').on('click', function() {
		//TODO
    	alert('CANCLE START');

    });

})

//画面の初期化処理
function viewSet(idx) {
    //console.log('画面の初期化実施');
    const viewOnly = document.getElementById("view-only");
    const viewEdit = document.getElementById("view-edit");
    const status = $('#statusFlg').val();

    if(idx == '3'){
	//管理者権限
    	if(viewOnly.style.display=="block"){
    		viewOnly.style.display ="none";
    	}
    	if(viewEdit.style.display=="none"){
    		viewEdit.style.display ="block";
    	}
	}else{
	//一般利用者権限(参照のみ)
    	if(viewOnly.style.display=="none"){
    		viewOnly.style.display ="block";
    	}
    	if(viewEdit.style.display=="block"){
    		viewEdit.style.display ="none";
    	}
	}
	viewChange('0');
}

function viewChange(idx) {
    if(idx == '0'){
    	//参照モード
    	//Tab-1
		$("#customerno").attr("disabled",true);
		$("#customer").attr("disabled",true);
		$("#sitename").attr("disabled",true);
		$("#address").attr("disabled",true);
		$("#outermailaddr").attr("disabled",true);
		$("#intermailaddr").attr("disabled",true);
		$("#adminusername").attr("disabled",true);
		$("#adminmailaddress").attr("disabled",true);
		$("#adminphoneno").attr("disabled",true);
		$("#startcontactcd").attr("disabled",true);
		$("#startvoicepath").attr("disabled",true);
		$("#startvoicecycl").attr("disabled",true);
		$("#startvoicecnt").attr("disabled",true);
		$("#startsubject").attr("disabled",true);
		$("#startmailtext").attr("disabled",true);
		$("#endcontactcd").attr("disabled",true);
		$("#endvoicepath").attr("disabled",true);
		$("#endvoicecycl").attr("disabled",true);
		$("#endvoicecnt").attr("disabled",true);
		$("#endsubject").attr("disabled",true);
		$("#endmailtext").attr("disabled",true);
    }else{
        //編集モード
    	//Tab-1
    	if($("#viewFlag").val() == "add"){
            $("#customerno").removeAttr("disabled");
    	}
        $("#customer").removeAttr("disabled");
        $("#sitename").removeAttr("disabled");
        $("#address").removeAttr("disabled");
        $("#outermailaddr").removeAttr("disabled");
        $("#intermailaddr").removeAttr("disabled");
        $("#adminusername").removeAttr("disabled");
        $("#adminmailaddress").removeAttr("disabled");
        $("#adminphoneno").removeAttr("disabled");
        $("#startcontactcd").removeAttr("disabled");
        $("#startvoicepath").removeAttr("disabled");
        $("#startvoicecycl").removeAttr("disabled");
        $("#startvoicecnt").removeAttr("disabled");
        $("#startsubject").removeAttr("disabled");
        $("#startmailtext").removeAttr("disabled");
        $("#endcontactcd").removeAttr("disabled");
        $("#endvoicepath").removeAttr("disabled");
        $("#endvoicecycl").removeAttr("disabled");
        $("#endvoicecnt").removeAttr("disabled");
        $("#endsubject").removeAttr("disabled");
        $("#endmailtext").removeAttr("disabled");
    }
}

//TODO:必須入力チェック
function checkValue(){
	$("#mainFrom").find("input[type=text]").each(function(index, item){
        if ($(this).val().trim() == '') {
            return false;
        }
    });
    var count=$('select option:selected').val();
    if(count == 0){
        return false;
    }
}

//選択されたタブを設定する。
function setTabId(idx){
	if(idx === '1'){
    	$('#tabId').val('1');
	}else{
    	$('#tabId').val('2');
	}
}

//演算式設を更新
function changeClatext(){
	var calText = '';
    $('#calTextarea').val('');

    for (var i=1; i < 11; i++) {
    	var col1 = '';
    	var col2 = $('#calTabTable tr').eq(i).children('td').eq(2).text();
    	var col3 = $('#calTabTable tr').eq(i).children('td').eq(3).text();
    	var col4 = $('#calTabTable tr').eq(i).children('td').eq(4).text();

    	if(i === 1){
    		if( col2 !== ''){
    			calText += " "+col2;
    		}
    		if( col3 !== ''){
    			calText += " "+col3;
    		}
    		if( col4 !== ''){
    			calText += " "+col4;
    		}
    	}else{
    		col1 = $('#sltRow'+i).val();
    		if(col1 !== '0'){
    			calText += " "+col1;
    			if( col2 !== ''){
    				calText += " "+col2;
    			}
    			if( col3 !== ''){
    				calText += " "+col3;
    			}
    			if( col4 !== ''){
    				calText += " "+col4;
    			}
    		}
    	}
	}
    $('#calTextarea').val(calText);
}

function clearClatext(){
	$('#calTextarea').val('');
    for (var i=1; i < 11; i++) {
    	$('#calTabTable tr').eq(i).children('td').eq(2).text('');
    	$('#calTabTable tr').eq(i).children('td').eq(4).text('');
    	if(i > 1){
    		$('#sltRow'+i).find('option:first').attr('selected', 'selected');
    	}
    }
}

</script>
</body>
</html>