<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>OPS:詳細設定</title>
    <meta name="description" content="OPS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="stylesheet" href="../static/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/assets/css/style.css">
	<!-- datetimepicker -->
	<link rel="stylesheet" href="../static/assets/css/datetimepicker/jquery.datetimepicker.css">
	<!-- dataTable -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.22/datatables.min.css"/>
    <link href='../static/vendors/Select-1.3.1/css/select.dataTables.css' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
<style>

th{
	text-align: center;
}
td{
	text-align: left;
}
.file {
  position: relative;
  overflow: hidden;
}
#startFileName,#endFileName {
  position: absolute;
  font-size: 50px;
  opacity: 0;
  right: 0;
  top: 0;
}
.highlight { background-color: #b0c4de; }
.nonhighlighted { background: white; }
</style>
</head>

<body>
    <!-- Left Panel -->
	<div th:insert="fragments/sidebar :: sidebar" th:remove="tag"></div>
    <!-- Left Panel -->
    <div id="right-panel" class="right-panel">

        <!-- Header-->
		<div th:insert="fragments/top_nav :: top_nav" th:remove="tag"></div>
        <!-- Header-->

        <div class="breadcrumbs">
            <div class="col-sm-12">
                <div class="col-sm-2">
	                <div class="page-header float-left">
	                    <div class="page-title">
	                        <h1>詳細設定</h1>
	                    </div>
	                </div>
                </div>

                <div class="col-sm-4" style="margin-top: 10px; float: left;">
					<span style="color:red; font-size:1.6em; text-align: left;" th:disabled="${errMsg != null}" th:text="${errMsg}"></span>
                </div>
                <div class="col-sm-6">
	                <div class="float-left" id="view-only" style="float: right; text-align: right; padding-top: 14px;">
						<span style="padding-right:80px;"></span>
						<input type="checkbox" id="chkInput" name="chkInput" th:checked=" ${detailTab.jdgsw} == '1' " >
						<span style="font-size:1.4em;"> 有効（未入力項目がある場合、チェック不可）</span>
					</div>
	                <div class="float-right" id="view-only" style="float: right; text-align: right; margin-top: 10px; display:none;">
                        <button type="button" id="editViewBtn" class="btn btn-warning btn-sm"><i class="fa fa-tag"></i>&nbsp; 参照中</button>
                        <span style="padding-right:10px;"></span>
                        <button type="button" class="btn btn-secondary btn-sm"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" id="viewCancleBtn" class="btn btn-danger btn-sm"><i class="fa fa-repeat"></i>&nbsp; キャンセル</button>
		        	</div>
	                <div class="float-right" id="view-edit" style="float: right; text-align: right; margin-top: 10px; display:none;">
                        <button type="button" id="modeEditBtn" class="btn btn-primary btn-sm" style="display: none;"><i class="fa fa-edit"></i>&nbsp; 編集中</button>
                        <button type="button" id="modeViewBtn" class="btn btn-warning btn-sm"><i class="fa fa-tag"></i>&nbsp; 参照中</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" id="saveOkBtn" class="btn btn-success btn-sm" data-toggle="modal" style="display:none;"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <button type="button" id="saveNgBtn" class="btn btn-secondary btn-sm"><i class="fa fa-save"></i>&nbsp; 保存</button>
                        <span style="padding-right:10px;"></span>
	                    <button type="button" id="editCancleBtn" class="btn btn-danger btn-sm"><i class="fa fa-repeat"></i>&nbsp; キャンセル</button>
		        	</div>
                </div>
	        </div>
        </div>

		<form th:action="@{/detail/insert}" name="mainFrom" id="mainFrom" method="post">
		<input type="hidden" id="statusFlg" name="statusFlg" value="0">
		<input type="hidden" id="viewFlag" name="viewFlag" th:value="${viewFlag}">
		<input type="hidden" id="upUserId" name="upUserId" th:value="${session.id}">
		<input type="hidden" id="upUserName" name="upUserName" th:value="${session.name}">
		<input type="hidden" id="jdgsw" name="jdgsw" th:value="${detailTab.jdgsw}">

        <div class="content mt-3">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#layer-1" role="tab" aria-controls="item1" aria-selected="true"><span style="font-size: 14px;">基本情報</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#layer-2" role="tab" aria-controls="item2" aria-selected="false"><span style="font-size: 14px;">開始判定条件・連絡</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#layer-3" role="tab" aria-controls="item3" aria-selected="false"><span style="font-size: 14px;">終了判定条件・連絡</span></a>
                </li>
            </ul>
            <div class="tab-content pl-3 p-1" id="myTabContent" style="padding-top: 20px !important;">

            	<!-- 基本情報TAB -->
                <div class="tab-pane fade show active" id="layer-1" role="tabpanel" aria-labelledby="home-tab">
                    <div class="col-6">
                        <!-- 基本情報 -->
                        <h5>サイト選択</h5>
                        <div class="card card-body">
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">
									<button type="button" id="siteNgBtn" class="btn btn-secondary btn-sm"><i class="fa fa-sitemap"></i>&nbsp; サイト選択</button>
									<button type="button" id="siteOkBtn" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#siteSearchModal" style="display:none;"><i class="fa fa-sitemap"></i>&nbsp; サイト選択</button>
                                </div>
                                <div class="col-8">
                                    <input type="text" id="sitename" name="sitename" class="form-control input-sm required" style="background-color:#fffacd !important; color: #000000;" readonly th:value="${detailTab.sitename}" >
                                    <input type="hidden" id="sitecd" name="sitecd" class="form-control input-sm required" th:value="${detailTab.sitecd}">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【住所】${Address}</div>
                                <div class="col-8">
                                    <input type="text" id="address" name="address" class="form-control input-sm required" th:value="${detailTab.address}">
                                </div>
                            </div>
                        </div>
                        <!-- 指定電力超過のお知らせメール 記載情報 -->
                        <h5>指定電力超過のお知らせメール 記載情報</h5>
                        <div class="card card-body">
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【お客様番号】</div>
                                <div class="col-8">
                                    <input type="text" id="customerno" name="customerno" class="form-control input-sm required"  th:value="${detailTab.customerno}">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-4" style="font-size: 15px;">【施設名】${Customer}</div>
                                <div class="col-8">
                                    <input type="text" id="customer" name="customer" class="form-control input-sm required" th:value="${detailTab.customer}">
                                </div>
                            </div>
                        </div>
                        <!-- メール送付先 -->
                        <h5>メール送付先</h5>
                        <div class="card card-body">
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">社内展開ユーザー名称<br>
                                    <button type="button" id="userMOkBtn" class="btn btn-primary btn-sm btn_m_user" data-toggle="modal" data-target="#userSelectModal" style="display:none; margin-top: 10px;"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                    <button type="button" id="userMNgBtn" class="btn btn-secondary btn-sm btn_m_user" style="margin-top:10px;"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                </div>
                                <div class="col-9">
                                    <input type="hidden" id="loginuser" name="loginuser" th:value="${detailTab.loginuser}">
                                    <input type="hidden" id="intermailaddr" name="intermailaddr" th:value="${detailTab.intermailaddr}">
                                    <input type="text" id="interusername" name="interusername" class="form-control input-sm required" style="background-color:#fffacd !important; color: #000000;" readonly th:value="${detailTab.interusername}">
                                </div>
                            </div>
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">社外アドレス<br>連絡メールのみ<br>(セミコロン；区切り)</div>
                                <div class="col-9"><textarea name="outermailaddr" id="outermailaddr" rows="2" placeholder="" class="form-control required" th:text="${detailTab.outermailaddr}"></textarea></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <h5>管理者</h5>
                        <div class="card card-body">
                            <!-- 管理者 -->
                           <div class="row form-group form-group-sm">
                         	<div style="width:100%;">
                               <div class="col-3">
                               <div class="col-3" style="padding-top: 20px;">
                                    <button type="button" id="userSOkBtn" class="btn btn-primary btn-sm btn_s_user" data-toggle="modal" data-target="#adminSearchModal" style="display:none;"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                                    <button type="button" id="userSNgBtn" class="btn btn-secondary btn-sm btn_s_user"><i class="fa fa-users"></i>&nbsp; ユーザー選択</button>
                               </div>
                               </div>
                               <div class="col-9">
                                   <div class="col-6">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">名称</label>
                                       <input type="hidden" class="form-control input-sm" id="adminuserid" name="adminuserid" style="" th:value="${detailTab.adminuserid}">
                                       <input type="text" class="form-control input-sm required" id="adminusername" name="adminusername" style="background-color:#fffacd !important; color: #000000;" th:value="${detailTab.adminusername}" readonly>
                                   </div>
                                   <div class="col-6">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">電話番号</label>
                                       <input type="text" class="form-control input-sm required" id="adminphoneno" name="adminphoneno" style="background-color:#fffacd !important; color: #000000;" th:value="${detailTab.adminphoneno}" readonly>
                                   </div>
                               </div>
                               </div>
                            	<div style="width:100%;">
                            	<div class="col-3">
                            	</div>
                                <div class="col-9" style="padding: 20px 30px 30px;">
                                       <label for="" class="control-label mb-1" style="font-size: 14px;">メールアドレス</label>
                                       <input type="text" class="form-control input-sm required" id="adminmailaddress" name="adminmailaddress" style="background-color:#fffacd !important; color: #000000;" th:value="${detailTab.adminmailaddress}" readonly>
                                   </div>
                               </div>
                           </div><!-- row form-group form-group-sm-->
                       </div><!-- card card-body-->
                    </div>
                    <div class="col-6">
                        <!-- <h5>最終更新日時・更新者</h5> -->
                        <div class="card card-body">
                            <div class="row form-group form-group-sm">
                                <div class="col-9">
                                    <div class="col-6">
                                            <label for="" class="control-label mb-1" style="font-size: 15px;">最終更新日時</label>
                                            <input type="text" id="upoatime" name="upoatime" class="form-control input-sm" th:value="${detailTab.upoatime}" disabled>
                                    </div>
                                    <div class="col-6">
                                            <label for="" class="control-label mb-1" style="font-size: 15px;">最終更新者</label>
                                            <input type="text" id="upoaid" name="upoaid" class="form-control input-sm" th:value="${detailTab.upoaid}" disabled>
                                            <input type="hidden" id="upoaname" name="upoaname" class="form-control input-sm" th:value="${detailTab.upoaname}">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 開始判定条件・連絡TAB -->
                <div class="tab-pane fade" id="layer-2" role="layer-2" aria-labelledby="profile-tab">
                    <div class="col-6">
                        <h5>開始連絡</h5>
                        <div class="card card-body">
                            <!-- 開始連絡 -->
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">
                                    連絡先
                                </div>
                                <div class="col-9">
								    <select id="startcontactcd" name="startcontactcd" class="form-control required" style="width: 100%; ">
								        <option value=""></option>
								        <option th:each="scont : ${contList}" th:value="${scont.contactcd}" th:selected="${scont.contactcd} == ${detailTab.startcontactcd}" th:inline="text">[[${scont.contactname}]]/[[${scont.contactmailaddress}]]/[[${scont.contactphoneno}]]</option>
								    </select>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">電話番号音声ファイル</div>
                                <div class="col-9">
									<audio id="wav1">
									  <source src="" type="audio/wav">
									</audio>
                                    <br>
                                    <input type="text" id="startvoicepath" name="startvoicepath" class="form-control input-sm required"
                                    style="width: 250px; background-color:#fffacd !important; color: #000000;" readonly
                                    th:value="${detailTab.startvoicepath}">
                                    <div id="fileSerach1NgBtn" class="file btn btn-sm btn-secondary">
										<i class="fa fa-list-ul"></i>&nbsp; 選択
									</div>
                                    <div id="fileSerach1OkBtn" class="file btn btn-sm btn-primary" style="display: none;">
										<i class="fa fa-list-ul"></i>&nbsp; 選択
										<input type="file" name="startFileName" id="startFileName"/>
									</div>
                                    <button type="button" id="fileUp1NgBtn" class="btn btn-secondary btn-sm" style="margin-bottom: 10px; width: 120px; margin-top: 10px;"><i class="fa fa-upload"></i>&nbsp; アップロード</button>
                                    <button type="button" id="fileUp1OkBtn" class="btn btn-success btn-sm" onclick="uploadFile('mainFrom', 'startFileName', '0')" style="margin-bottom: 10px; width: 120px; margin-top: 10px; display:none;"><i class="fa fa-upload"></i>&nbsp; アップロード</button>
                                    <button type="button" class="btn btn-danger btn-sm" id="startPlayBtn" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-play"></i>&nbsp; 再生</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">電話番号リトライ回数</div>
                                <div class="col-9">
                                    <input type="text" id="startvoicecycl" name="startvoicecycl" class="form-control input-sm required" style="width: 100px;" th:value="${detailTab.startvoicecycl}">
                                    <span style="margin-left: 10px; margin-right: 10px; font-size: 14px;">分間隔</span>
                                    <input type="text" id="startvoicecnt" name="startvoicecnt" class="form-control input-sm required" style="width: 100px;" th:value="${detailTab.startvoicecnt}">
                                    <span style="margin-left: 10px; font-size: 14px;">回</span>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3"style="font-size: 15px;">メールタイトル</div>
                                <div class="col-9">
                                    <input type="text" id="startsubject" name="startsubject" class="form-control input-sm required" style="width: 100%;" th:value="${detailTab.startsubject}">
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline" style="vertical-align:top;">
                                <div class="col-3" style="height: 400px; vertical-align:top; font-size: 15px;">メール本文</div>
                                <div class="col-9">
                                    <textarea name="startmailtext" id="startmailtext" rows="5" style="width: 100%; height: 400px;" placeholder="" class="form-control required" th:text=${detailTab.startmailtext}></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <h5>開始判定条件</h5>
                        <div class="card card-body">
                            <!-- 開始判定条件 -->
                            <div class="row form-group form-group-sm">
                                <div class="col-6">
                                    <textarea style="overflow:auto;" name="startCalTextarea" id="startCalTextarea" rows="2" placeholder="" class="form-control"></textarea>
                                </div>
                                <div class="col-6">
                                    <button type="button" class="btn btn-primary btn-sm btn_start_cal" style="margin-bottom: 10px; width: 150px;"
                                    data-toggle="modal" data-target="#calModal" onclick="setTabId('1')"><i class="fa fa-list-ul"></i>&nbsp; 演算式設定</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm">
                                <div class="col-12">
                                    <label for="" class="control-label mb-1">接点タグ</label>
                                    <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th class="centerText" style="width:10%;" scope="col">No</th>
                                                <th class="centerText" style="width:20%;" scope="col">監視端末</th>
                                                <th class="centerText" style="width:20%;" scope="col">タグ名称</th>
                                                <th class="centerText" style="width:10%; " scope="col">ON/OFF</th>
                                                <th style="width:30%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th scope="row">A</th>
                                                <td>大手町タワー#1</td>
                                                <td>1号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">B</th>
                                                <td>大手町タワー#2</td>
                                                <td>1号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">C</th>
                                                <td>大手町タワー#3</td>
                                                <td>1号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">D</th>
                                                <td>大手町タワー#1</td>
                                                <td>2号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">E</th>
                                                <td>大手町タワー#2</td>
                                                <td>2号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">F</th>
                                                <td>大手町タワー#3</td>
                                                <td>2号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">G</th>
                                                <td>大手町タワー#1</td>
                                                <td>3号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">H</th>
                                                <td>大手町タワー#2</td>
                                                <td>3号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">I</th>
                                                <td>大手町タワー#3</td>
                                                <td>3号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">J</th>
                                                <td>大手町タワー#1</td>
                                                <td>4号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 終了判定条件・連絡TAB -->
                <div class="tab-pane fade" id="layer-3" role="layer-3" aria-labelledby="contact-tab">
                    <div class="col-6">
                        <h5>終了連絡</h5>
                        <div class="card card-body">
                            <!-- 終了連絡　-->
                            <div class="row form-group form-group-sm">
                                <div class="col-3" style="font-size: 15px;">
                                    連絡先
                                </div>
                                <div class="col-9">
								    <select id="endcontactcd" name="endcontactcd" class="form-control required" style="width: 100%; ">
								        <option value=""></option>
								        <option th:each="econt : ${contList}" th:value="${econt.contactcd}" th:selected="${econt.contactcd} == ${detailTab.endcontactcd}" th:inline="text">[[${econt.contactname}]]/[[${econt.contactmailaddress}]]/[[${econt.contactphoneno}]]</option>
								    </select>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">電話番号音声ファイル</div>
                                <div class="col-9">
									<audio id="wav2">
									  <source src=""  type="audio/wav">
									</audio>
									<br>
                                    <input type="text" id="endvoicepath" name="endvoicepath" class="form-control input-sm required"
                                     style="width: 250px; background-color:#fffacd !important; color: #000000;" readonly
                                     th:value="${detailTab.endvoicepath}">
                                    <div id="fileSerach2NgBtn" class="file btn btn-sm btn-secondary">
										<i class="fa fa-list-ul"></i>&nbsp; 選択
									</div>
                                    <div id="fileSerach2OkBtn" class="file btn btn-sm btn-primary" style="display: none;">
										<i class="fa fa-list-ul"></i>&nbsp; 選択
										<input type="file"  name="endFileName" id="endFileName" />
									</div>
                                    <button type="button" id="fileUp2NgBtn" class="btn btn-secondary btn-sm" style="margin-bottom: 10px; width: 120px; margin-top: 10px;"><i class="fa fa-upload"></i>&nbsp; アップロード</button>
                                    <button type="button" id="fileUp2OkBtn" class="btn btn-success btn-sm" onclick="uploadFile('mainFrom', 'endFileName', '1')" style="margin-bottom: 10px; width: 120px; margin-top: 10px; display:none;"><i class="fa fa-upload"></i>&nbsp; アップロード</button>
                                    <button type="button" class="btn btn-danger btn-sm" id="endPlayBtn" style="margin-bottom: 10px; width: 70px; margin-top: 10px;"><i class="fa fa-play"></i>&nbsp; 再生</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">電話番号リトライ回数</div>
                                <div class="col-9">
                                    <input type="text" id="endvoicecycl" name="endvoicecycl" class="form-control input-sm required" style="width: 100px;" th:value="${detailTab.endvoicecycl}">
                                    <span style="margin-left: 10px; margin-right: 10px; font-size: 14px;">分間隔</span>
                                    <input type="text" id="endvoicecnt" name="endvoicecnt" class="form-control input-sm required" style="width: 100px;" th:value="${detailTab.endvoicecnt}">
                                    <span style="margin-left: 10px; font-size: 14px;">回</span>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline">
                                <div class="col-3" style="font-size: 15px;">メールタイトル</div>
                                <div class="col-9">
                                    <input type="text" id="endsubject" name="endsubject" class="form-control input-sm required" style="width: 100%;" th:value="${detailTab.endsubject}">
                                </div>
                            </div>
                            <div class="row form-group form-group-sm form-inline" style="vertical-align:top;">
                                <div class="col-3" style="height: 400px; vertical-align:top; font-size: 15px;">メール本文</div>
                                <div class="col-9">
                                    <textarea name="endmailtext" id="endmailtext" rows="5" style="width: 100%; height: 400px;" placeholder="" class="form-control required" th:text=${detailTab.endmailtext}></textarea>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-6">
                        <h5>終了判定条件</h5>
                        <div class="card card-body">
                            <!-- 終了判定条件 -->
                            <div class="row form-group form-group-sm">
                                <div class="col-5">
                                    <textarea style="overflow:auto;" name="endCalTextarea" id="endCalTextarea" rows="2" placeholder="" class="form-control"></textarea>
                                </div>
                                <div class="col-2" style="text-align: center; vertical-align: text-bottom; font-size: medium;">
                                    <span>AND</span>
                                </div>
                                <div class="col-2">
                                    <textarea style="background-color:white;" name="ikitiZ_input" id="ikitiZ_input" rows="2" class="form-control" disabled=true></textarea>
                                </div>
                                <div class="col-3">
                                        <button type="button" class="btn btn-primary btn-sm btn_end_cal" style="margin-bottom: 10px; width: 150px;"
                                        data-toggle="modal" data-target="#calModal" onclick="setTabId('2')"><i class="fa fa-list-ul"></i>&nbsp; 演算式設定</button>
                                </div>
                            </div>
                            <div class="row form-group form-group-sm">

                                <div class="col-12">
                                    <label for="" class="control-label mb-1">接点タグ</label>
                                    <table class="table table-bordered table-sm" id="tagTable">
                                        <thead>
                                            <tr>
                                             <th style="width:10%;" scope="col">No</th>
                                                <th style="width:20%;" scope="col">監視端末</th>
                                                <th style="width:20%;" scope="col">タグ名称</th>
                                                <th style="width:10%;" scope="col">ON/OFF</th>
                                                <th style="width:30%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr>
                                                <th  scope="row">A</th>
                                                <td>大手町タワー#1</td>
                                                <td>1号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">B</th>
                                                <td>大手町タワー#2</td>
                                                <td>1号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                   <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">C</th>
                                                <td>大手町タワー#3</td>
                                                <td>1号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">D</th>
                                                <td>大手町タワー#1</td>
                                                <td>2号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">E</th>
                                                <td>大手町タワー#2</td>
                                                <td>2号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">F</th>
                                                <td>大手町タワー#3</td>
                                                <td>2号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">G</th>
                                                <td>大手町タワー#1</td>
                                                <td>3号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">H</th>
                                                <td>大手町タワー#2</td>
                                                <td>3号準備</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">I</th>
                                                <td>大手町タワー#3</td>
                                                <td>3号開始</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th scope="row">J</th>
                                                <td>大手町タワー#1</td>
                                                <td>4号停止</td>
                                                <th>
                                                    <select><option>ON</option><option>OFF</option></select>
                                                </th>
                                                <th>
                                                    <button type="button" class="btn btn-primary btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </th>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!-- アナログタグ -->
                                    <label for="" class="control-label mb-1">アナログタグ</label>
                                    <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                        <thead>
                                            <tr>
                                                <th style="width:5%;" scope="col">No</th>
                                                <th style="width:20%;" scope="col">監視端末</th>
                                                <th style="width:20%;" scope="col">タグ名称</th>
                                                <th style="width:10%;"></th>
                                                <th style="width:10%;" scope="col">閾値</th>
                                                <th style="width:35%;"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td scope="row" style="text-align: center; vertical-align: middle;">Z</td>
                                                <td style="text-align: center; vertical-align: middle;">大手町タワー#2</td>
                                                <td style="text-align: center; vertical-align: middle;">受電電力</td>
                                                <td style="text-align: center; vertical-align: middle;">
                                                	<select id="ikitiZSlt" name="ikitiZSlt">
                                                		<option value="＞">＞</option>
                                                		<option value="≧">≧</option>
                                                		<option value="≦">≦</option>
                                                		<option value="＜">＜</option>
                                                	</select>
                                                </td>
                                                <td style="text-align: center; vertical-align: middle;"><input type=text id="ikitiZ" placeholder=4.000></td>
                                                <td style="text-align: center; vertical-align: middle;">
                                                    <button type="button" class="btn btn-primary btn-sm btn_analog_add" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagModal"><i class="fa fa-cog"></i>&nbsp; タグ設定</button>
                                                    <button type="button" class="btn btn-danger btn-sm btn_analog_del" style="width: 100px; height: 30px;" data-toggle="modal" data-target="#tagDeleteModal"><i class="fa fa-eraser"></i>&nbsp; タグ削除</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table><!-- .アナログタグ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
</form>
<!-- Site Search Modal Start-->
<div class="modal fade" id="siteSearchModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id='siteForm'>
<input type="hidden" id="hidSiteName">
<input type="hidden" id="hidSiteCd">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">サイト設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="keyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 120px; font-size: 14px;">No</th>
                                        <th style="text-align:center; width: 500px; font-size: 14px;">サイト名称</th>
                                        <th style="text-align:center; display: none;"></th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="siteList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                        	    <thead style="display:none;">
                                    <tr>
                                        <td></td><td></td><td></td>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="rows, rowStat : ${siteList}">
        <td scope="row" style="width: 112px !important; text-align:center;padding-left: 10px;" th:text="${rowStat.count}"></td>
		<td style="width: 500px !important; font-size: 12px;" th:text="${rows.sitename}"></td>
		<td style="display: none;" th:text="${rows.sitecd}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_site_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- Site Search Modal End-->
<!-- 管理者ユーザー選択Modal Start-->
<div class="modal fade" id="adminSearchModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id='adminForm'>
<input type="hidden" id="hidmailgroupname">
<input type="hidden" id="hidAdminId">
<input type="hidden" id="hidAdminName">
<input type="hidden" id="hidAdminAddress">
<input type="hidden" id="hidAdminTelno">

    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">ユーザー選択</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="adminKeyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_admin_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                   <tr style="width: 100%; background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 20%; font-size: 14px;">氏名</th>
                                        <th style="text-align:center; width: 20%; font-size: 14px;">組織名</th>
                                        <th style="text-align:center; width: 40%; font-size: 14px;">メールアドレス</th>
                                        <th style="text-align:center; width: 20%; font-size: 14px;">電話番号</th>
										<th style="text-align:center; width: 0%; display: none;"></th>
                                    </tr>
                                </thead>
                        	</table>

                            <table id="adminList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                        	    <thead style="display:none;">
                                     <tr>
                                        <th></th>
                                        <th></th>
                                        <th></th>
                                        <th ></th>
										<th style="display: none;"></th>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="admin : ${userList}" style="width: 100%;">
    <td style="width: 20%; font-size: 12px; text-align:center;" th:text="${admin.username}"></td>
    <td style="width: 20%; font-size: 12px; text-align:center;" th:text="${admin.mailgroupname}"></td>
    <td style="width: 40%; font-size: 12px;" th:text="${admin.mailaddr}"></td>
    <td style="width: 20%; font-size: 12px;" th:text="${admin.mobiletel}"></td>
	<td style="display: none; width: 0%;" th:text="${admin.loginuser}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_admin_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- 管理者ユーザー選択Modal End-->
<!-- User Select Modal Start-->
<div class="modal fade" id="userSelectModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id="userForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">ユーザー選択</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">キーワード</label>
                                <input type="text" id="userKeyword" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary btn_user_search"><i class="fa fa-search"></i> 検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">

                         	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                        <tr style="width: 100%; background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 14px;"></th>
                                        <th style="text-align:center; width: 30%; font-size: 14px;">氏名</th>
                                        <th style="text-align:center; width: 20%; font-size: 14px;">組織名</th>
                                        <th style="text-align:center; width: 40%; font-size: 14px;">メールアドレス</th>
                                        <th style="text-align:center; width: 0%; font-size: 14px; display:none;"></th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="userList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                                <thead style="display:none;">
                                      <tr style="width: 100%; background-color: #000033; color:white;">
                                        <th ></th>
                                        <th ></th>
                                        <th ></th>
                                        <th ></th>
                                        <th style="display:none;"></th>
                                    </tr>
                                </thead>
                                <tbody>
<tr th:each="user : ${userList}" style="width: 100%;" th:with="isExist = ${detailTab.intermailaddr != null}">
	<td scope="row" style="width: 10%; text-align:center;">
	    <input type="checkbox" name="userCheck" value="option1" th:checked="${isExist and (#strings.contains(detailTab.intermailaddr, user.mailaddr.toString()))}">
	</td>
    <td style="width: 30%; font-size: 12px;"th:text="${user.username}"></td>
    <td style="width: 20%; font-size: 12px;"th:text="${user.mailgroupname}"></td>
    <td style="width: 40%; font-size: 12px;"th:text="${user.mailaddr}"></td>
    <td style="width: 0%; font-size: 12px; display:none;"th:text="${user.loginuser}"></td>
</tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_user_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- User Select Modal End-->
<!-- Cal Modal Start-->
<div class="modal fade" id="calModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">演算式設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="margin-bottom: 0px;">
                <div class="col-sm-12 col-lg-12" style="margin-bottom: 0px;">
                    <div class="card" style="margin-bottom: 0px;">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">演算式</label>
                                <textarea style="background-color:lightyellow;" name="calTextarea" id="calTextarea"
                                 rows="2" cols="100%" placeholder="" class="form-control" disabled></textarea>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                            <table id="calTabTable" class="table table-bordered table-sm">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 14px;">No</th>
                                        <th colspan="4" style="text-align:center;width: 90%; font-size: 14px;">演算子 (　　　　　　　　　)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="height: 40px;">
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">1</td>
                                        <td style="width: 15%; font-size: 12px; text-align: center;"></td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">A</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">2</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow2" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">B</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">3</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow3" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">C</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">4</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow4" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">D</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">5</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow5" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">E</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">6</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow6" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">F</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">7</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow7" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">G</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">8</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow8" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">H</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">9</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow9" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">I</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                    <tr>
                                        <td scope="row" style="text-align:center;padding-left: 12px; vertical-align:middle;">10</td>
                                        <td style="width: 15%; font-size: 11px; text-align: center;">
			                                <select id="sltRow10" class="form-control form-control-sm" onchange="changeClatext()">
			                                    <option value="0">   </option>
			                                    <option value="OR">OR</option>
			                                    <option value="AND">AND</option>
			                                </select>
                                        </td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                        <td style="width: 45%; font-size: 14px; text-align: center; vertical-align:middle;">J</td>
                                        <td style="width: 15%; font-size: 14px; text-align: center; vertical-align:middle;"> </td>
                                    </tr>
                                </tbody>
                             </table>
                             <table class="table table-bordered table-sm" style="margin-bottom: 0px;">
                                <tbody>
                                	<tr>
	                                	<td style="text-align: center;">
											<button type="button" class="btn btn-dark btn_left_add" style="width: 120px; text-align: center;"> ( </button>
											<button type="button" class="btn btn-dark btn_right_add" style="width: 120px; text-align: center;"> ) </button>
											<button type="button" class="btn btn-dark btn_left_del" style="width: 120px; text-align: center;"> ( DEL </button>
											<button type="button" class="btn btn-dark btn_right_del" style="width: 120px; text-align: center;"> ) DEL </button>
											<button type="button" class="btn btn-danger btn_clear" style="width: 120px; text-align: center;"> クリア </button>
	                                	</td>
                                	</tr>
                                </tbody>
                            </table>
                            <div class="form-group form-inline" style="margin-top: 10px; margin-bottom: 0px;">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">コメント</label>
                                <textarea name="calComment" id="calComment" rows="2" cols="100%" placeholder="" class="form-control"></textarea>
                            </div><!--/.form-group -->
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_set_cal" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="clearClatext()">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Cal Modal End-->
<!-- 連絡先マスタ Modal Start -->
<div class="modal fade" id="masterModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">連絡先マスタ</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline" style="float: right; padding-top: 20px;">
                                <button type="button" class="btn btn-info" style="margin-right: 20px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-plus-square"></i> 新規</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                            <table id="bootstrap-data-table-export" class="table table-striped table-bordered table-sm">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 10%; font-size: 12px;">NO</th>
                                        <th style="text-align:center;width: 20%; font-size: 12px;">名称</th>
                                        <th style="text-align:center;width: 25%; font-size: 12px;">メールアドレス</th>
                                        <th style="text-align:center;width: 20%; font-size: 12px;">電話番号</th>
                                        <th style="text-align:center;width: 25%; font-size: 12px;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row" style="text-align:center;">1</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">2</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">3</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">4</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row" style="text-align:center;">5</th>
                                        <td style="font-size: 0.9em;">〇〇〇〇〇〇〇〇〇</td>
                                        <td style="font-size: 0.9em;">＃＃＃＃＃＃＃＃＃</td>
                                        <td style="font-size: 0.9em;">XXX-XXXX-XXXX</td>
                                        <td style="text-align:center;">
	                                        <button type="button" class="btn btn-sm btn-primary" style="margin-right: 5px;" data-toggle="modal" data-target="#addModal"><i class="fa fa-edit"></i> 編集</button>
	                                        <button type="button" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#subDeleteModal"><i class="fa fa-eraser"></i> 削除</button>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- 連絡先マスタ Modal End -->
<!-- Master Add Modal Part Start-->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">名称</label>
                    <input type="text" placeholder="" style="width: 290px" class="form-control input-sm">
                </div><!--/.form-group -->
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">電話番号</label>
                    <input type="text" placeholder="" style="width: 290px;" class="form-control input-sm">
                </div><!--/.form-group -->
                <div class="form-group form-inline">
                    <label class=" form-control-label" style="width: 100px; font-size: 14px; margin-right: 10px; text-align: left;">メールアドレス</label>
                    <input type="text" placeholder="" style="width: 290px;" class="form-control input-sm">
                </div><!--/.form-group -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary">保存</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Master Add Modal Part End-->
<!-- Tag Modal Start-->
<div class="modal fade" id="tagModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
<form id="tagForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">タグ一覧</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-sm-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <div class="form-group form-inline">
                                <input type="text" placeholder="大手町プレイスウエストタワー" class="form-control input-sm">
                            </div><!--/.form-group -->
                            <div class="form-group form-inline">
                                <label class=" form-control-label" style="font-size: 14px; margin-right: 10px;">顧客</label>
                                <select name="select" id="select" class="form-control">
                                    <option value="0">大手町PWタワー#1</option>
                                    <option value="1">大手町PWタワー#2</option>
                                </select>
                                <input type="text" placeholder="" class="form-control input-sm">
                                <button type="button" class="btn btn-primary"><i class="fa fa-search"></i>検索</button>
                            </div><!--/.form-group -->
                        </div>
                        <div class="card-body">
                        	<table class="table table-striped table-bordered table-sm" style="width: 100%; margin-bottom: 0px !important;">
                                <thead>
                                    <tr style="background-color: #000033; color:white;">
                                        <th style="text-align:center; width: 120px; font-size: 14px;">タグNo</th>
                                        <th style="text-align:center; width: 300px; font-size: 14px;">タグ名称</th>
                                        <th style="text-align:center; width: 200px; font-size: 14px;">単位</th>
                                    </tr>
                                </thead>
                        	</table>
                            <table id="tagList" class="table table-striped table-bordered table-sm" style="width: 100%; margin-top: 0px !important;">
                                <thead style="display:none;">
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody>
<th:block th:each="seq : ${#numbers.sequence(1,50)}">
                                    <tr>
                                        <td scope="row" style="width: 121px; text-align:center;padding-left: 10px;" th:text="|Di${seq}|"></td>
                                        <td style="width: 330px; font-size: 12px;"th:text="|${seq}号機開始動中|"></td>
                                        <td style="width: 200px; font-size: 12px;"></td>
                                    </tr>
</th:block>
                                </tbody>
                            </table>

                        </div>
                    </div><!-- /.card-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_ok" data-dismiss="modal">設定</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- Tag Modal End-->
<!-- Modal Part Start-->
<div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document" style="max-width:350px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>データを保存します。</p>
                <div class="row form-group">
                    <div class="col-4" style="margin-top: 10px;"><span style="font-size: 12px;">アカウント</span></div>
                    <div class="col-8">
                        <input type="text" id="checkId" name="checkId" placeholder="" class="form-control input-sm">
                    </div>
                </div>
            </div>
            <div class="alert alert-danger alert-dismissable text-left" id="idErr" hidden="true">アカウントは管理されていません。再入力して下さい。</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn_save">保存</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Part End-->
<!-- Tag Delete Modal Part Start-->
<div class="modal fade" id="tagDeleteModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    選択されたタグを削除します。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">削除</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Tag Delete Modal Part End-->
<!-- Cancel Modal Part Start-->
<div class="modal fade" id="cancelModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    データを保存せずに終了します。<br>よろしいですか?
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="backSetting();" data-dismiss="modal">はい</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">いいえ</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="cancelViewModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    データの参照を終了します。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="backSetting();" data-dismiss="modal">はい</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">いいえ</button>
            </div>
        </div>
    </div>
</div>
<!-- Cancel Modal Part End-->

<!-- Check Modal Part Start-->
<div class="modal fade" id="checkModal" tabindex="-1" role="dialog" aria-labelledby="mediumModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mediumModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    未入力項目があるため保存できません。<br>一時保存する場合は、有効チェックを外してください。
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">確認</button>
            </div>
        </div>
    </div>
</div>
<!-- Check Modal Part End-->

<!-- Delete Modal Part Start-->
<div class="modal fade" id="subDeleteModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">自家補連絡設定</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="OK">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <p>
                    選択されたデータを削除します。<br>よろしいですか？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">削除</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">キャンセル</button>
            </div>
        </div>
    </div>
</div>
<!-- Delete Modal Part End-->

        </div> <!-- .content -->

<form id="hidTabForm">
<input type="hidden" id="tabId" name="tabId">
</form>
<form th:action="@{/setting/}" name="hidBackForm" id="hidBackForm" method="post">
	<input type="hidden" id="flag" name="flag">
</form>

    </div><!-- /#right-panel -->

	<!-- datetimepicker -->
    <script src="../static/assets/js/datetimepicker/jquery.js"></script>
    <script src="../static/assets/js/datetimepicker/jquery.datetimepicker.full.js"></script>
    <script src="../static/vendors/jquery/dist/jquery.js"></script>
    <script src="../static/vendors/popper.js/dist/umd/popper.min.js"></script>
    <script src="../static/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../static/assets/js/main.js"></script>
	<!-- dataTable -->
	<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.22/datatables.min.js"></script>
	<script type="text/javascript" src="../static/vendors/Select-1.3.1/js/dataTables.select.js"></script>

<script th:inline="javascript">
/*<![CDATA[*/
var enable = /*[[${session.enable}]]*/ 'default';
var login_id = /*[[${session.id}]]*/ 'default';
/*]]>*/

const viewEditNg = document.getElementById("editNgDiv");
const viewEditOk = document.getElementById("editOkDiv");

jQuery(document).ready(function($) {
	document.addEventListener('keydown', function(event) {
		  if (event.keyCode === 13) {
		    event.preventDefault();
		  };
		}, true);

$("#startFileName").on('change',function(){
	if(window.FileReader){
		var filename = $(this)[0].files[0].name;
	}else{
		var filename = $(this).val().split('/').pop.split('\\').pop();
	}
	$("#startvoicepath").val(filename);

});

$("#endFileName").on('change',function(){
		if(window.FileReader){
			var filename = $(this)[0].files[0].name;
		}else{
			var filename = $(this).val().split('/').pop.split('\\').pop();
		}
		$("#endvoicepath").val(filename);
});

	var selectedIdx = 0;
	//画面表示初期化
	viewSet(enable);

	//UserList DataTable Option設定
    var tableUser = $('#userList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        }
 	});

	//SiteList DataTable Option設定
    var tableSite = $('#siteList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

	//管理者ユーザー選択のDataTable Option設定
    var tableAdmin = $('#adminList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

	//DataTable Option設定
    var table = $('#tagList').DataTable( {
    	responsive: true,
 	    searching: false,
        paging: false,
    	ordering: true,
        info: false,
    	lengthChange: false,
    	autoWidth: true,
 	    fixedHeader: true,
        scrollY: 350,
        scrollCollapse: true,
        language: {
            "url": "//cdn.datatables.net/plug-ins/1.10.16/i18n/Japanese.json"
        },
        select: {
            style: 'single'
     	}
 	});

    $(".dataTables_scrollBody").width($(".dataTables_scrollHead").width());
    $('#button').click( function () {
        table.row('.selected').remove().draw( false );
    } );

    //モーダル終了時、選択行をクリア
    $('.btn_ok').on('click', function (e) {
        table.$('tr.selected').removeClass('selected');
    });

    //サイト選択後、設定ボタンをクリックすると親ウィンドウに値をセット
    $('#siteList tr').on('click', function (e) {
        var str = ""
        var tdArr = new Array();
        var tr = $(this);
        var td = tr.children();
        var siteName = td.eq(1).text();
        var siteCd = td.eq(2).text();
        $('#hidSiteName').val(siteName);
        $('#hidSiteCd').val(siteCd);
    });
    $('.btn_site_ok').on('click', function (e) {
    	var selectedSiteName = $('#hidSiteName').val();
    	var selectedSiteCd = $('#hidSiteCd').val();
    	if(selectedSiteName != 'サイト名称'){
        	$('#sitename').val(selectedSiteName);
        	$('#sitecd').val(selectedSiteCd);
    	}
    	//tableSite.$('tr.selected').removeClass('selected');
    	//$('#siteSearchModal').find('form')[0].reset()

    });

	//管理者のユーザー選択、設定ボタンをクリックすると親ウィンドウに値をセット
    $('#adminList tr').on('click', function (e) {
        var str = ""
        var tdArr = new Array();
        var tr = $(this);
        var td = tr.children();
        var adminName = td.eq(0).text();
        var mailgroupname = td.eq(1).text();
        var adminAddress = td.eq(2).text();
        var adminTelno = td.eq(3).text();
        var adminId = td.eq(4).text();
        $('#hidAdminId').val(adminId);
        $('#hidmailgroupname').val(mailgroupname);
        $('#hidAdminName').val(adminName);
        $('#hidAdminTelno').val(adminTelno);
        $('#hidAdminAddress').val(adminAddress);
    });
    $('.btn_admin_ok').on('click', function (e) {
    	var selectedAdminId = $('#hidAdminId').val();
    	var selectedAdminName = $('#hidAdminName').val();
    	var selectedAdminAddress = $('#hidAdminAddress').val();
    	var selectedAdminTelno = $('#hidAdminTelno').val();
    	if(selectedAdminName != '氏名'){
        	$('#adminuserid').val(selectedAdminId);
        	$('#adminusername').val(selectedAdminName);
        	$('#adminphoneno').val(selectedAdminTelno);
        	$('#adminmailaddress').val(selectedAdminAddress);
    	}
    	tableSite.$('tr.selected').removeClass('selected');
    	$('#adminSearchModal').find('form')[0].reset()
    });

    //ユーザー選択後、設定ボタンをクリックすると親ウィンドウに値をセット
	$(".btn_user_ok").click(function(){
		var rowData = new Array();
		var tdArr = new Array();
		var checkbox = $("input[name=userCheck]:checked");
		var name = '';
		var email = '';
		var id = '';
		let emailArr = '';
		let idArr = '';
		let userArr = '';
		checkbox.each(function(i){
			var tr = checkbox.parent().parent().eq(i);
			var td = tr.children();
			name = td.eq(1).text();
			email = td.eq(3).text();
			id = td.eq(4).text();
			if(emailArr == ''){
				emailArr = email;
				idArr = id;
				userArr = name;
			}else{
				emailArr += ','+email;
				idArr += ','+id;
				userArr += ','+name;
			}
		});
		$('#interusername').val(userArr);
		$('#intermailaddr').val(emailArr);
		$('#loginuser').val(idArr);
    	//tableUser.$('tr.selected').removeClass('selected');
    	//$('#userSelectModal').find('form')[0].reset()
	});

    //演算式設定関連関数===================================
    //アナログタグ中、演算子更新
	$("#ikitiZSlt").on('change', function (e) {
		var ikiti = $('#ikitiZ').val();
		if(ikiti != ''){
			$('#ikitiZ_input').val('');
			var r = $('[name=ikitiZSlt] option:selected').text();
		    $('#ikitiZ_input').val('Z '+ r + ' '+ ikiti);
		}
	});
    //アナログタグ中、閾値更新
	$('#ikitiZ').keyup(function() {
		var ikiti = $('#ikitiZ').val();
		if(ikiti != ''){
			$('#ikitiZ_input').val('');
			var r = $('[name=ikitiZSlt] option:selected').text();
		    $('#ikitiZ_input').val('Z '+ r + ' '+ ikiti);
		}
    });

    $('#calTabTable tr').on('click', function (e) {
        var selected = $(this).hasClass("highlight");
        rowno = $(this).closest('tr').index();
        selectedIdx = rowno+1;
        $("#calTabTable tr").removeClass("highlight");
        if(!selected){
            $(this).addClass("highlight");
        }
    });

    $(".btn_left_add").click(function(){
    	var txt = $('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text();
    	txt = txt+"(";
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text(txt);
        changeClatext();
    });
    $(".btn_right_add").click(function(){
    	var txt = $('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text();
    	txt = txt+")";
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text(txt);
        changeClatext();
    });
    $(".btn_left_del").click(function(){
    	var txt = $('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text();
    	txt = txt.slice(0, -1);
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(2).text(txt);
        changeClatext();
    });
    $(".btn_right_del").click(function(){
    	var txt = $('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text();
    	txt = txt.slice(0, -1);
		$('#calTabTable tr').eq(selectedIdx).children('td').eq(4).text(txt);
        changeClatext();
    });
    $(".btn_clear").click(function(){
    	clearClatext();
    });
    $(".btn_set_cal").click(function(){
    	var tabID = $('#tabId').val();
    	var getText = $('#calTextarea').val();
    	if(tabID === '1'){
        	$('#startCalTextarea').val('');
        	$('#startCalTextarea').val(getText);
    	}else{
        	$('#endCalTextarea').val('');
        	$('#endCalTextarea').val(getText);
    	}
    	clearClatext();
    });
	//演算式設定関連関数===================================

	//有効チェックおよび未入力項目チェックを行う。
	$("#saveOkBtn").click(function(){
    	if($('#chkInput').is(":checked") == true){
			if(checkValue()){
	    		$("#saveModal").modal("show");
			}else{
	    		$("#checkModal").modal("show");
			}
    	}else{
    		if($('#customerno').val() == ''){
	    		$("#checkModal").modal("show");
    		}else{
       			$("#saveModal").modal("show");
    		}
    	}
    });

	//有効チェックボックストグル
	$('#chkInput').on('change', function () {
	    if ($(this).prop('checked')) {
    		$("#jdgsw").val('1');
	    } else {
    		$("#jdgsw").val('0');
	    }
	});

	//参照キャンセル処理を行う。
	$("#viewCancleBtn").click(function(){
		$("#cancelViewModal").modal("show");
	});
	//編集キャンセル処理を行う。
	$("#editCancleBtn").click(function(){
		if($('#statusFlg').val() === '0'){
	    	$("#cancelViewModal").modal("show");
		}else{
	    	$("#cancelModal").modal("show");
		}
	});

	//開始音声再生
	startPlayBtn.addEventListener("click", ()=>{
	    // pausedがtrue=>停止, false=>再生中
	    if(!wav1.paused ){
		  startPlayBtn.innerHTML = '<i class="fa fa-play"></i> 再生';  // 「再生ボタン」に切り替え
	      wav1.pause();
	    }else{
		  startPlayBtn.innerHTML = '<i class="fa fa-play"></i> 再生';  // 「再生ボタン」に切り替え
	      wav1.play();
		}
	});
	/**
	 * [event] 再生終了時に実行  <i class="fas fa-pause"></i>
	 */
	 wav1.addEventListener("ended", ()=>{
		wav1.currentTime = 500;
	});
	//終了音声再生
	endPlayBtn.addEventListener("click", ()=>{
	    // pausedがtrue=>停止, false=>再生中
	    if(!wav2.paused ){
		  endPlayBtn.innerHTML = '<i class="fa fa-play"></i> 再生';  // 「再生ボタン」に切り替え
	      wav2.pause();
		}else{
		  endPlayBtn.innerHTML = '<i class="fa fa-play"></i> 再生';  // 「再生ボタン」に切り替え
	      wav2.play();
		}
	});
	/**
	* [event] 再生終了時に実行
	*/
	wav2.addEventListener("ended", ()=>{
		wav2.currentTime = 500;
	});

});

jQuery(function($){
	$('#calModal').on('show.bs.modal', function (event) {
		var modal = $(this);
		var itemIDs = [];
		$('#tagTable tr').map(function () {
		itemIDs.push($(this).children('th:first').text());
		});

		for (i = 1; i < itemIDs.length; i++) {
			modal.find('.card-body select#tagNo' + i +' option').remove();
			for (j = 1; j < itemIDs.length; j++) {
				var option = document.createElement('option');
				option.setAttribute('value', itemIDs[j]);
				if(i == j){
					option.setAttribute('selected', true);
				}
				option.innerHTML = itemIDs[j];
				modal.find('.card-body select#tagNo'+ i).append(option);
			}
		}

	});

    $('#modeEditBtn').on('click', function() {

		//非活性化
        $('#modeEditBtn').hide();
        $('#modeViewBtn').show();
        $('#saveOkBtn').hide();
        $('#siteOkBtn').hide();
        $('#userMOkBtn').hide();
        $('#userSOkBtn').hide();
        $('#fileUp1OkBtn').hide();
        $('#fileUp2OkBtn').hide();
        $('#fileSerach1OkBtn').hide();
        $('#fileSerach2OkBtn').hide();
		//活性化
        $('#saveNgBtn').show();
        $('#siteNgBtn').show();
        $('#userMNgBtn').show();
        $('#userSNgBtn').show();
        $('#fileUp1NgBtn').show();
        $('#fileUp2NgBtn').show();
        $('#fileSerach1NgBtn').show();
        $('#fileSerach2NgBtn').show();

        $('#statusFlg').val('0');
		viewChange('0');
    });
    $('#modeViewBtn').on('click', function() {
		//非活性化
        $('#modeViewBtn').hide();
        $('#modeEditBtn').show();
        $('#saveNgBtn').hide();
        $('#siteNgBtn').hide();
        $('#userMNgBtn').hide();
        $('#userSNgBtn').hide();
        $('#fileUp1NgBtn').hide();
        $('#fileUp2NgBtn').hide();
        $('#fileSerach1NgBtn').hide();
        $('#fileSerach2NgBtn').hide();
		//活性化
        $('#saveOkBtn').show();
        $('#siteOkBtn').show();
        $('#userMOkBtn').show();
        $('#userSOkBtn').show();
        $('#fileUp1OkBtn').show();
        $('#fileUp2OkBtn').show();
        $('#fileSerach1OkBtn').show();
        $('#fileSerach2OkBtn').show();

        $('#statusFlg').val('1');
		viewChange('1');
    });

    //サイト選択区分
    $('.btn_search').on('click', function() {
    	var keyword = $('#keyword').val();
    	if(keyword == ''){
            $("#siteList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#siteList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var id = $row.find('td:eq(1)').text();
                    if (id.indexOf(keyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}

    });
    //管理者ユーザー選択区分
    $('.btn_admin_search').on('click', function() {
    	var adminKeyword = $('#adminKeyword').val();
    	if(adminKeyword == ''){
            $("#adminList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#adminList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var admin = $row.find('td:eq(0)').text();
                    if (admin.indexOf(adminKeyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}
    });

    //ユーザー選択区分
    $('.btn_user_search').on('click', function() {
    	var userKeyword = $('#userKeyword').val();
    	if(userKeyword == ''){
            $("#userList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    $(this).show();
                }
            });
    	}else{
            $("#userList tr").each(function(index) {
                if (index != 0) {
                    $row = $(this);
                    var user = $row.find('td:eq(1)').text();
                    if (user.indexOf(userKeyword) !== -1) {
                        $(this).show();
                    }else {
                        $(this).hide();
                    }
                }
            });
    	}
    });


    //詳細設定保存処理
    $('.btn_save').on('click', function() {

		var inUserId = $('#checkId').val();
		if(inUserId != login_id){
			//チェックエラー
			$("#idErr")[0].hidden = false;
		}else{
			//保存処理を行う
			$("#idErr")[0].hidden = true;
			if($("#viewFlag").val() == 'add'){
				$("#mainFrom").action = "/detail/insert/";
			}else{
				$("#mainFrom").action = "/detail/update/";
			}
			$("#mainFrom").submit();
		}
    });
})

//画面の初期化処理
function viewSet(idx) {
    //console.log('画面の初期化実施');
    const viewOnly = document.getElementById("view-only");
    const viewEdit = document.getElementById("view-edit");
    const status = $('#statusFlg').val();

    //音声ファイル設定
	var audio_1 = $('#startvoicepath').val();
	if(audio_1 != ''){
		var audioFile = location.protocol+'//'+location.host+'/audio/'+audio_1;
		$("#wav1").attr('src',audioFile);
	}
	var audio_2 = $('#endvoicepath').val();
	if(audio_2 != ''){
		var audioFile = location.protocol+'//'+location.host+'/audio/'+audio_2;
		$("#wav2").attr('src',audioFile);
	}

    if(idx == '3'){
	//管理者権限
    	if(viewOnly.style.display=="block"){
    		viewOnly.style.display ="none";
    	}
    	if(viewEdit.style.display=="none"){
    		viewEdit.style.display ="block";
    	}
	}else{
	//一般利用者権限(参照のみ)
    	if(viewOnly.style.display=="none"){
    		viewOnly.style.display ="block";
    	}
    	if(viewEdit.style.display=="block"){
    		viewEdit.style.display ="none";
    	}
	}
	viewChange('0');
}

function viewChange(idx) {
    if(idx == '0'){
    	//参照モード
    	//Tab-1
		$("#customerno").attr("disabled",true);
		$("#customer").attr("disabled",true);
		//$("#sitename").attr("disabled",true);
		$("#address").attr("disabled",true);
		$("#outermailaddr").attr("disabled",true);
		//$("#intermailaddr").attr("disabled",true);
		//$("#adminusername").attr("disabled",true);
		//$("#adminmailaddress").attr("disabled",true);
		//$("#adminphoneno").attr("disabled",true);
		$("#startcontactcd").attr("disabled",true);
		$("#startvoicepath").attr("disabled",true);
		$("#startvoicecycl").attr("disabled",true);
		$("#startvoicecnt").attr("disabled",true);
		$("#startsubject").attr("disabled",true);
		$("#startmailtext").attr("disabled",true);
		$("#endcontactcd").attr("disabled",true);
		$("#endvoicepath").attr("disabled",true);
		$("#endvoicecycl").attr("disabled",true);
		$("#endvoicecnt").attr("disabled",true);
		$("#endsubject").attr("disabled",true);
		$("#endmailtext").attr("disabled",true);
    }else{
        //編集モード
    	//Tab-1
    	if($('#viewFlag').val() == 'add'){
            $("#customerno").removeAttr("disabled");
    	}else{
            $("#customerno").removeAttr("disabled");
    		$("#customerno").attr("readonly",true);
    	}
        $("#customer").removeAttr("disabled");
        $("#address").removeAttr("disabled");
        $("#outermailaddr").removeAttr("disabled");
        //$("#sitename").removeAttr("disabled");
        //$("#intermailaddr").removeAttr("disabled");
        //$("#adminusername").removeAttr("disabled");
        //$("#adminmailaddress").removeAttr("disabled");
        //$("#adminphoneno").removeAttr("disabled");
        $("#startcontactcd").removeAttr("disabled");
        $("#startvoicepath").removeAttr("disabled");
        $("#startvoicecycl").removeAttr("disabled");
        $("#startvoicecnt").removeAttr("disabled");
        $("#startsubject").removeAttr("disabled");
        $("#startmailtext").removeAttr("disabled");
        $("#endcontactcd").removeAttr("disabled");
        $("#endvoicepath").removeAttr("disabled");
        $("#endvoicecycl").removeAttr("disabled");
        $("#endvoicecnt").removeAttr("disabled");
        $("#endsubject").removeAttr("disabled");
        $("#endmailtext").removeAttr("disabled");
    }
}

//必須入力項目をチェック
function checkValue(){
    var requiredFlag = true;
    $('.required').each(function(){
        if ( $(this).is(':text, textarea, select') && $(this).val().length < 1 ) {
            requiredFlag = false;
            return false;
        }
    });
    if( requiredFlag == true) {
        return true;
    }
}

//選択されたタブを設定する。
function setTabId(idx){
	if(idx === '1'){
    	$('#tabId').val('1');
	}else{
    	$('#tabId').val('2');
	}
}

//演算式設を更新
function changeClatext(){
	var calText = '';
    $('#calTextarea').val('');

    for (var i=1; i < 11; i++) {
    	var col1 = '';
    	var col2 = $('#calTabTable tr').eq(i).children('td').eq(2).text();
    	var col3 = $('#calTabTable tr').eq(i).children('td').eq(3).text();
    	var col4 = $('#calTabTable tr').eq(i).children('td').eq(4).text();

    	if(i === 1){
    		if( col2 !== ''){
    			calText += " "+col2;
    		}
    		if( col3 !== ''){
    			calText += " "+col3;
    		}
    		if( col4 !== ''){
    			calText += " "+col4;
    		}
    	}else{
    		col1 = $('#sltRow'+i).val();
    		if(col1 !== '0'){
    			calText += " "+col1;
    			if( col2 !== ''){
    				calText += " "+col2;
    			}
    			if( col3 !== ''){
    				calText += " "+col3;
    			}
    			if( col4 !== ''){
    				calText += " "+col4;
    			}
    		}
    	}
	}
    $('#calTextarea').val(calText);
}

function clearClatext(){
	$('#calTextarea').val('');
    for (var i=1; i < 11; i++) {
    	$('#calTabTable tr').eq(i).children('td').eq(2).text('');
    	$('#calTabTable tr').eq(i).children('td').eq(4).text('');
    	if(i > 1){
    		$('#sltRow'+i).find('option:first').attr('selected', 'selected');
    	}
    }
}

//キャンセル時の設定一覧で遷移
function backSetting(){
	$('#hidBackForm').submit();
}

//音声ファイルアップロード
function uploadFile(wavForm, item, flag){
	var file = document.getElementById(item);
	var filePath = file.value;
	var filePathSplit = filePath.split('\\');
	var filePathLength = filePathSplit.length;
	var fileNameSplit = filePathSplit[filePathLength-1].split('.');
	var fileName = fileNameSplit[0];
	var fileExt = fileNameSplit[1];
	var fileSize = file.files[0].size;

	if(filePath == ''){
		alert('アップロードする音声ファイルを選択してください。');
	}else{
		const formData=new FormData(document.getElementById(wavForm));
	    const request=new XMLHttpRequest();

	    request.onreadystatechange =function(){
		    if(this.readyState==4 && this.status==200){

		    	if(flag == '0'){
					$('#startvoicepath').val(fileName+'.'+fileExt);
					var audioFile = location.protocol+'//'+location.host+'/audio/'+fileName+'.'+fileExt;
					console.log(audioFile);
					$("#wav1").attr('src',audioFile);
		    	}else{
					$('#endvoicepath').val(fileName+'.'+fileExt);
					var audioFile = location.protocol+'//'+location.host+'/audio/'+fileName+'.'+fileExt;
					console.log(audioFile);
					$("#wav2").attr('src',audioFile);
		    	}

		    }
	    }
		if(flag == '0'){
		    request.open("POST","/ops/detail/uploadwav");
		}else{
		    request.open("POST","/ops/detail/uploadendwav");
		}
	    request.responseType='blob';
	    request.send(formData);
	}
}


</script>
</body>
</html>